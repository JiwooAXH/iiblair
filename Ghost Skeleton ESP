--// 2D Box ESP for Ghost Model
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera

local function CreateESP(Model)
    -- Create four separate lines for the box outline
    local TopLine = Drawing.new("Line")
    local BottomLine = Drawing.new("Line")
    local LeftLine = Drawing.new("Line")
    local RightLine = Drawing.new("Line")
    
    -- Box color
    local BoxColor = Color3.fromRGB(200, 200, 200) -- Light gray outline
    
    -- Configure properties for all lines
    for _, Line in pairs({TopLine, BottomLine, LeftLine, RightLine}) do
        Line.Color = BoxColor
        Line.Thickness = 1.5 -- Thinner outline for a modern look
    end
    
    local function UpdateESP()
        if not Model or not Model:IsDescendantOf(workspace) then
            for _, Line in pairs({TopLine, BottomLine, LeftLine, RightLine}) do
                Line.Visible = false
            end
            return
        end
        
        local PrimaryPart = Model.PrimaryPart or Model:FindFirstChildOfClass("BasePart")
        if not PrimaryPart then return end
        
        local Vector, OnScreen = Camera:WorldToViewportPoint(PrimaryPart.Position)
        if OnScreen then
            local SizeY = math.clamp(3000 / Vector.Z, 30, 120) -- Dynamic box size
            local SizeX = SizeY * 0.5
            local Position = Vector2.new(Vector.X - SizeX / 2, Vector.Y - SizeY / 2)
            
            -- Define box outline
            TopLine.From = Position
            TopLine.To = Position + Vector2.new(SizeX, 0)
            
            BottomLine.From = Position + Vector2.new(0, SizeY)
            BottomLine.To = BottomLine.From + Vector2.new(SizeX, 0)
            
            LeftLine.From = Position
            LeftLine.To = Position + Vector2.new(0, SizeY)
            
            RightLine.From = Position + Vector2.new(SizeX, 0)
            RightLine.To = RightLine.From + Vector2.new(0, SizeY)
            
            for _, Line in pairs({TopLine, BottomLine, LeftLine, RightLine}) do
                Line.Visible = true
            end
        else
            for _, Line in pairs({TopLine, BottomLine, LeftLine, RightLine}) do
                Line.Visible = false
            end
        end
    end
    
    RunService.RenderStepped:Connect(UpdateESP)
end

RunService.RenderStepped:Connect(function()
    local Ghost = workspace:FindFirstChild("Ghost")
    if Ghost and Ghost:IsA("Model") then
        CreateESP(Ghost)
    end
end)
